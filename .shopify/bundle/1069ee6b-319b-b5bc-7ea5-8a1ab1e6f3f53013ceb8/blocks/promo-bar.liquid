{%- comment -%}
Promo Bar — Theme App Extension block
- Renders a simple announcement bar.
- Uses block settings (message, colors, dismissible).
{%- endcomment -%}

<div class="promo-bar" role="region" aria-label="Store announcement"
     style="background: {{ block.settings.bg_color }}; color: {{ block.settings.text_color }}; padding: 8px 16px; display:flex; align-items:center; gap:12px; justify-content:center; position:relative;">
  <span>{{ block.settings.message }}</span>

  {%- if block.settings.dismissible -%}
    <button type="button" aria-label="Close announcement"
            style="position:absolute; right:8px; top:6px; background:transparent; border:0; font-size:20px; line-height:1; cursor:pointer;"
            onclick="this.closest('.promo-bar').remove()">×</button>
  {%- endif -%}
</div>

{% schema %}
{
  "name": "Promo Bar",
  "target": "section",
  "settings": [
    {
      "type": "text",
      "id": "message",
      "label": "Message",
      "default": "Free shipping on orders over €50"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#111827"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#FFFFFF"
    },
    {
      "type": "checkbox",
      "id": "dismissible",
      "label": "Allow customers to dismiss",
      "default": true
    }
  ]
}
{% endschema %}
